<div class="min-h-screen p-6" id="Player_Queue">

  @if (deviceService.mediaRendererSelected()) {
    <!-- Header Section -->
    <div class="mb-8">
      <div class="flex items-center justify-between mb-6">
        <div class="flex items-center gap-3">
          <span class="material-symbols-outlined text-white text-3xl">queue_music</span>
          <div>
            <h1 class="text-3xl font-semibold text-white">Playlist</h1>
            <p class="text-gray-400 text-sm mt-1">
              {{deviceService.selectedMediaRendererDevice().friendlyName}}
            </p>
          </div>
        </div>
        
        <!-- Action Buttons -->
        <div class="flex gap-3">
          <button 
            mat-stroked-button 
            (click)="play()"
            [disabled]="!hasPlaylistItems"
            class="px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-all duration-200 flex items-center gap-2">
            <mat-icon class="material-symbols-outlined">play_arrow</mat-icon>
            <span>Play</span>
          </button>
          <button 
            mat-stroked-button 
            (click)="delete()"
            [disabled]="!hasPlaylistItems"
            class="px-6 py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg transition-all duration-200 flex items-center gap-2">
            <mat-icon class="material-symbols-outlined">delete</mat-icon>
            <span>Clear All</span>
          </button>
        </div>
      </div>
      
      <div class="h-px bg-white/10"></div>
    </div>

    <!-- Playlist Items -->
    @if (hasPlaylistItems) {
      <div class="space-y-2">
        @for (item of playlistService.playlistItems(); track item.objectID) {
          <div 
            class="group flex items-center gap-4 p-4 rounded-lg bg-white/5 hover:bg-white/10 transition-all duration-200 cursor-pointer"
            [class.ring-2]="getActiveClass(item)"
            [class.ring-aqua]="getActiveClass(item)"
            [class.bg-gradient-to-r]="getActiveClass(item)"
            [class.from-aqua/20]="getActiveClass(item)"
            [class.to-blue-500/20]="getActiveClass(item)"
            (click)="playlistService.seekId(item.objectID)"
            id="PL-{{item.objectID}}"
            tabindex="0">
            
            <!-- Album Art -->
            <div class="relative flex-shrink-0">
              <img 
                [src]="item.albumArtUrl" 
                [alt]="item.title"
                class="w-16 h-16 rounded-lg object-cover shadow-lg">
              @if (getActiveClass(item)) {
                <div class="absolute inset-0 flex items-center justify-center bg-black/50 rounded-lg">
                  <span class="material-symbols-outlined text-aqua text-2xl">graphic_eq</span>
                </div>
              }
            </div>
            
            <!-- Track Info -->
            <div class="flex-1 min-w-0">
              <div class="flex items-center gap-2 mb-1">
                <h3 class="text-lg font-medium truncate"
                    [class.text-aqua]="getActiveClass(item)"
                    [class.text-white]="!getActiveClass(item)">
                  {{item.title}}
                </h3>
                <quality-badge [item]="item"></quality-badge>
              </div>
              <p class="text-gray-400 text-sm truncate">{{item.artistName}}</p>
              <p class="text-gray-500 text-sm truncate">{{item.album}}</p>
            </div>
            
            <!-- Delete Button -->
            <button 
              (click)="playlistService.deleteSongFromRendererPlaylist(item.objectID); $event.stopPropagation()"
              class="p-2 rounded-lg bg-white/5 hover:bg-red-600/20 text-gray-400 hover:text-red-400 transition-all duration-200 opacity-0 group-hover:opacity-100">
              <span class="material-symbols-outlined">close</span>
            </button>
          </div>
        }
      </div>
    } @else {
      <!-- Empty State -->
      <div class="flex flex-col items-center justify-center py-20">
        <div class="w-32 h-32 bg-white/5 rounded-full flex items-center justify-center mb-6">
          <span class="material-symbols-outlined text-gray-600 text-6xl">queue_music</span>
        </div>
        <p class="text-2xl text-gray-400 mb-2">Playlist is empty</p>
        <p class="text-gray-500">Add some tracks to get started</p>
      </div>
    }
  } @else {
    <!-- No Renderer Selected -->
    <div class="flex flex-col items-center justify-center min-h-screen">
      <div class="w-32 h-32 bg-white/5 rounded-full flex items-center justify-center mb-6">
        <span class="material-symbols-outlined text-gray-600 text-6xl">speaker</span>
      </div>
      <p class="text-2xl text-gray-400 mb-2">No Media Renderer Selected</p>
      <p class="text-gray-500">
        Please select a media renderer by clicking the 
        <span class="material-symbols-outlined align-middle text-lg">speaker</span> button.
      </p>
    </div>
  }
</div>


