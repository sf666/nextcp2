<div class="flex flex-col m-3 mb-32">
  <div class="">
    <div class="flex flex-row">
      <div class="flex mb-4">
        <h1 class="text-xl font-medium tracking-tight text-white">Server Configuration</h1>
        <div class="flex items-center ms-4">
          <input id="enabled-all-Server" type="checkbox" [(ngModel)]="showOnlyActiveServer" class="text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-600 ring-offset-gray-800 focus:ring-2 bg-gray-700 border-gray-600">
          <label for="enabled-all-Server" class="ms-2 text-sm font-light">show only active server</label>
        </div>
      </div>
    </div>
    <my-alert prefix="Info" text="Disabled servers will not appear in certain pop-ups or selection lists"></my-alert>

    <div class="flex flex-wrap gap-4 max-w-4xl">
      @for (serverConfig of getMediaServerConfig(); track serverConfig.mediaServer.udn) {
      <div class="flex flex-col bg-zinc-900 border-0 rounded-2xl">
        <!-- Header -->
         <div class="border-0 border-b-1 border-zinc-600 grow p-6 pb-2 flex flex-col">
            <div class="no-wrap text-lg font-bold">{{serverConfig.mediaServer.friendlyName}}</div>
            <div class="col-span-2 text-xs font-light text-zinc-600">{{serverConfig.mediaServer.udn}}</div>
         </div>

        <!-- Body -->
        <div class="flex p-4">
          <div class="grid grid-cols-3 gap-3 text-sm grow">
            <div class="font-medium">Enabled</div>
            <div class="col-span-2 flex items-center">
              <input id="enabled-checkbox" type="checkbox" [(ngModel)]="serverConfig.enabled" class="text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-600 ring-offset-gray-800 focus:ring-2 bg-gray-700 border-gray-600">
            </div>
            <div class="font-medium">Status</div>                
              @if (isServerConfigActive(serverConfig)) {
                <div class="col-span-2 text-zink-500 text-green-500">ONLINE</div>
              } @else {
                <div class="col-span-2">OFFLINE</div>
              }
            <div class="font-medium">IP</div>                
            <div class="col-span-2 font-light">{{serverConfig.ip}}</div>
            <div class="font-medium">MY PLAYLIST</div>                
            <div class="col-span-2 font-light">
              <input [(ngModel)]="serverConfig.playistObjectId" type="text" name="MY_PLAYLISTID_2" id="MY_PLAYLISTID_2"
              class="px-0 w-full text-sm bg-transparent bg-zinc-800 appearance-none border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
              placeholder="enter playlist object-id" />
            </div>
            @if (serverConfig.mediaServer.extendedApi) {
              <div class="font-medium">ID3 Rating</div>
              <div class="col-span-2 flex items-center">
                <input id="id3-checkbox" type="checkbox" [(ngModel)]="serverConfig.updateRatingInFile" class="text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-600 ring-offset-gray-800 focus:ring-2 bg-gray-700 border-gray-600">
                <label for="id3-checkbox" class="ms-2 text-sm font-light">update tag in media file</label>
              </div>
            }
          </div>
        </div>

        <!-- Footer -->
        <div class="flex border-0 border-t-1 border-zinc-600 p-6 flex justify-around">
          <button mat-stroked-button class="" color="primary" (click)="saveServerConfig(serverConfig)">save</button>
          <button mat-stroked-button class="" color="warn" (click)="deleteServerConfig(serverConfig)">delete</button>
        </div>
      </div>
      }
    </div>
    @if (getMediaServerConfig()?.length == 0) {
      <my-alert prefix="Info" text="No media server online"></my-alert>
    }

    <div class="mt-6 mt-8 flex flex-row mt-4">
      <h1 class="text-xl font-medium tracking-tight text-white">Renderer Configuration</h1>
      <mat-slide-toggle color="accent" class="ms-4 w-40 self-center grow-3" [(ngModel)]="showOnlyActiveRenderer">
        show only online renderer
      </mat-slide-toggle>
    </div>

    <p class="mt-4 font-light text-gray-400 max-w-2xl">
      Renderers may be offline. Disabled renderers will not appear in certain pop-ups or selection lists.</p>

    <p class="mt-2 font-light text-gray-400 max-w-2xl">
      If a streaming device is connected to an amplifier, a device driver can be selected to control the amplifier’s power and volume
      instead of the streamer’s. A default volume level can be applied to the amplifier when powered on. If UPnP Max Volume is enabled,
      the streaming device’s volume can be set to 100% at startup.</p>

    <div class="flex flex-wrap gap-4 mt-8 max-w-4xl">
      @for (rendererConfig of getMediaRenderer(); track rendererConfig.mediaRenderer.udn) {
      <div class="flex flex-col bg-zinc-900 border-0 rounded-2xl">
        <!-- Header -->
        <div class="border-0 border-b-1 border-zinc-600 grow p-6 pb-2 flex flex-col">
          <div class="no-wrap text-lg font-bold">{{rendererConfig.mediaRenderer.friendlyName}}</div>
          <div class="col-span-2 text-xs font-light text-zinc-600">{{rendererConfig.mediaRenderer.udn}}</div>
        </div>

        <!-- Body -->
        <div class="flex p-4">
          <div class="grid grid-cols-3 gap-3 text-sm grow">
            <div class="font-medium">Enabled</div>
            <div class="col-span-2 flex items-center">
              <input type="checkbox" [(ngModel)]="rendererConfig.active" class="text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-600 ring-offset-gray-800 focus:ring-2 bg-gray-700 border-gray-600">
            </div>
            <div class="font-medium">Status</div>                
            @if (isRendererConfigActive(rendererConfig)) {
              <div class="col-span-2 text-zink-500 text-green-500">ONLINE</div>
            } @else {
              <div class="col-span-2">OFFLINE</div>
            }
            <div class="font-medium">IP</div>
            <div class="col-span-2 font-light">{{rendererConfig.ip}}</div>
            <div class="font-medium mt-1">Amplifier Driver</div>
            <div>
              <select [(ngModel)]="rendererConfig.deviceDriverType" id="dd-select" class="p-1 border text-sm rounded-lg  block w-full bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500">
                <option selected value="">Choose a driver</option>
                @for (dd of configService.deviceDriverList; track dd) {
                  <option [value]="dd.deviceType">{{dd.deviceType}}</option>
                }                
              </select>              
            </div>
            @if (showAdvancedRendererSettings(rendererConfig)) {
              <div class="col-span-3 font-bold text-zinc-500">Device Driver Configuration</div>

              <div class="font-medium">connection string</div>
              <div class="col-span-2 font-light">
                <input [(ngModel)]="rendererConfig.connectionString" type="text" name="MY_PLAYLISTID_2" id="MY_PLAYLISTID_2"
                class="px-0 w-full text-sm bg-transparent bg-zinc-800 appearance-none border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
                placeholder="ip:port" />
              </div>

              <div class="font-medium">Amp default vol</div>
              <div class="col-span-2 font-light">
                <input [(ngModel)]="rendererConfig.powerOnVolPercent" type="number"
                class="px-0 w-full text-sm bg-transparent bg-zinc-800 appearance-none border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
                placeholder="enter power on default volume" />
              </div>

              <div class="font-medium">Amp default bal</div>
              <div class="col-span-2 font-light">
                <input [(ngModel)]="rendererConfig.powerOnBalance" type="number"
                class="px-0 w-full text-sm bg-transparent bg-zinc-800 appearance-none border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
                placeholder="enter power on default balance" />
              </div>

              <div class="font-medium">Max. Vol</div>
              <div class="col-span-2 font-light">
                <input id="{{rendererConfig.mediaRenderer.udn}}-vol" type="checkbox" [(ngModel)]="rendererConfig.setCoveredUpnpDeviceToMaxVolume" class="text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-600 ring-offset-gray-800 focus:ring-2 bg-gray-700 border-gray-600">
                <label for="{{rendererConfig.mediaRenderer.udn}}-vol" class="ms-2 text-sm font-light">set streamer to max volume</label>
              </div>
            }
          </div>
        </div>

        <!-- Footer -->
        <div class="flex border-0 border-t-1 border-zinc-600 p-6 flex justify-around">
            <button mat-stroked-button class="ms-2" color="primary" (click)="saveRendererConfig(rendererConfig)">save</button>
            <button mat-stroked-button class="ms-2" color="warn" (click)="deleteRendererConfig(rendererConfig)">delete</button>
            <button mat-stroked-button class="ms-2" color="basic" (click)="initServices(rendererConfig)">init services</button>
        </div>
      </div>
      }
      @if (getMediaRenderer()?.length == 0) {
        <my-alert class="grow" prefix="Info" text="No renderer online"></my-alert>
      }
    </div>

    <h1 class="mt-8 text-xl font-medium tracking-tight text-white">Server Actions</h1>

    @if(currentMediaServer.udn === undefined || currentMediaServer.udn === '') {
    <div class="p-4 m-4 text-sm rounded-lg bg-gray-800 text-red-400" role="alert">
      {{currentMediaServer.friendlyName}}
    </div>
    } @else {
    @if (extendedApiNotAvailable()) {
    <div class="p-4 m-4 text-sm rounded-lg bg-gray-800 text-red-400" role="alert">
      Advanced actions are available only when using <i>Universal Media Server</i>.
    </div>
    }
    }

    <div class="section subhead flex flex-col">
      <div class="flex flex-wrap">
        <button mat-stroked-button color="" class="ms-2 mb-2 my-buttons" (click)="rescan()" [disabled]="extendedApiNotAvailable()">rescan media library</button>
        <button mat-stroked-button color="warn" class="ms-2 mb-2 my-buttons" (click)="myMusicService.backupLikedAlbums()" [disabled]="extendedApiNotAvailable()">
          backup liked albums
        </button>
        <button mat-stroked-button class="ms-2 mb-2 my-buttons" (click)="myMusicService.restoreLikedAlbums()" [disabled]="extendedApiNotAvailable()">
          restore liked albums
        </button>
        <button mat-stroked-button class="ms-2 my-buttons" [disabled]="extendedApiNotAvailable()" (click)="ratingServiceService.syncRatingsFromMusicBrainzToBackend()">import rating
          from musicBrainz.org</button>
      </div>
    </div>


    <h1 class="text-xl font-medium tracking-tight text-white">General Configuration</h1>
    <form class="max-w-2xl m-8">
      <div class="grid grid-cols-2 gap-4">
        <div class="relative z-0 w-full mb-5 group">
          <input [(ngModel)]="configService.applicationConfig.libraryPath" type="text" name="FORM_DDLP" id="FORM_DDLP"
            class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
            placeholder=" " />
          <label for="FORM_DDLP"
            class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">device
            driver library path</label>
        </div>
        <div class="relative z-0 w-full mb-5 group">
          <input [(ngModel)]="configService.applicationConfig.databaseFilename" type="text" name="FORM_DBP" id="FORM_DBP"
            class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
            placeholder=" " />
          <label for="FORM_DBP"
            class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">database
            path</label>
        </div>
        <div class="relative z-0 w-full mb-5 group">
          <input [(ngModel)]="configService.applicationConfig.embeddedServerPort" type="text" name="FORM_EMSP" id="FORM_EMSP"
            class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
            placeholder=" " />
          <label for="FORM_EMSP"
            class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">unsecure
            server listening port</label>
        </div>
        <div class="relative z-0 w-full mb-5 group">
          <input [(ngModel)]="configService.applicationConfig.embeddedServerSslPort" type="text" name="FORM_EMSSP" id="FORM_EMSSP"
            class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
            placeholder=" " />
          <label for="FORM_EMSSP"
            class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">secure
            server listening port</label>
        </div>
        <div class="relative z-0 w-full mb-5 group">
          <input [(ngModel)]="configService.applicationConfig.embeddedServerSslP12Keystore" type="text" name="FORM_EMSSP12" id="FORM_EMSSP12"
            class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
            placeholder=" " />
          <label for="FORM_EMSSP12"
            class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">P12
            keystore file location</label>
        </div>
        <div class="relative z-0 w-full mb-5 group">
          <input [(ngModel)]="configService.applicationConfig.embeddedServerSslP12KeystorePassword" type="text" name="FORM_EMSSP12P" id="FORM_EMSSP12P"
            class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
            placeholder=" " />
          <label for="FORM_EMSSP12P"
            class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">P12
            keystore password</label>
        </div>
        <div class="relative z-0 w-full mb-5 group">
          <input [(ngModel)]="configService.applicationConfig.pathToRestartScript" type="text" name="FORM_RESSCRIPT" id="FORM_RESSCRIPT"
            class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
            placeholder=" " />
          <label for="FORM_RESSCRIPT"
            class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">path
            to restart script</label>
        </div>
        <div class="relative z-0 w-full mb-5 group">
          <input [(ngModel)]="configService.applicationConfig.log4jConfigFile" type="text" name="FORM_LOG4jcf" id="FORM_LOG4jcf"
            class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
            placeholder=" " />
          <label for="FORM_LOG4jcf"
            class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">Log4j
            config file</label>
        </div>
        <div class="relative z-0 w-full mb-5 group">
          <input [(ngModel)]="configService.applicationConfig.loggingDateTimeFormat" type="text" name="FORM_LOG4jformat" id="FORM_LOG4jformat"
            class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
            placeholder=" " />
          <label for="FORM_LOG4jformat"
            class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">Logging
            date format</label>
        </div>
        <div class="relative z-0 w-full mb-5 group">
          <input [(ngModel)]="configService.applicationConfig.upnpBindInterface" type="text" name="FORM_upnp_bin" id="FORM_upnp_bin"
            class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
            placeholder=" " />
          <label for="FORM_upnp_bin"
            class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">bind
            interface stream server</label>
        </div>
        <div class="relative z-0 w-full mb-5 group">
          <input [(ngModel)]="configService.applicationConfig.generateUpnpCode" type="text" name="FORM_upnp_gencode" id="FORM_upnp_gencode"
            class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
            placeholder=" " />
          <label for="FORM_upnp_gencode"
            class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">Generate
            UPnP code</label>
        </div>
        <div class="relative z-0 w-full mb-5 group">
          <input [(ngModel)]="configService.applicationConfig.generateUpnpCodePath" type="text" name="FORM_upnp_gencodepath" id="FORM_upnp_gencodepath"
            class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
            placeholder=" " />
          <label for="FORM_upnp_gencodepath"
            class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">Generate
            UPnP code path</label>
        </div>
      </div>
      <button mat-stroked-button color="primary" (click)="saveGeneralConfig()">save</button>
    </form>

    <h1 class="mt-8 text-xl font-medium tracking-tight text-white">Audio Addict Radio Network</h1>
    <form class="max-w-2xl m-8 mt-8">
      <div class="grid grid-cols-2 gap-4">
        <div class="relative z-0 w-full mb-5 group">
          <input [(ngModel)]="configService.audioAddictConfig().token" type="text" name="FORM_AA_token" id="FORM_AA_token"
            class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
            placeholder=" " />
          <label for="FORM_AA_token"
            class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">network
            token</label>
        </div>
        <div class="relative z-0 w-full mb-5 group">
          <input [(ngModel)]="configService.audioAddictConfig().user" type="text" name="FORM_AA_user" id="FORM_AA_user"
            class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
            placeholder=" " />
          <label for="FORM_AA_user"
            class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">username</label>
        </div>
        <div class="relative z-0 w-full mb-5 group">
          <input [(ngModel)]="configService.audioAddictConfig().pass" type="text" name="FORM_AA_pass" id="FORM_AA_pass"
            class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
            placeholder=" " />
          <label for="FORM_AA_pass"
            class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">password</label>
        </div>
        <div class="relative z-0 w-full mb-5 group">
          <input [(ngModel)]="configService.audioAddictConfig().preferEuropeanServer" type="text" name="FORM_AA_euro" id="FORM_AA_euro"
            class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
            placeholder=" " />
          <label for="FORM_AA_euro"
            class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">prefer
            european stream server</label>
        </div>
      </div>
      <button mat-stroked-button color="primary" (click)="saveAudioAddict()">save</button>
    </form>


    <h1 class="mt-8 text-xl font-medium tracking-tight text-white">External Accounts</h1>
    <h2 class="mt-4 font-medium tracking-tight text-gray-300">Spotify</h2>
    @if (configService.spotifyAccountConnected()) {
    <p class="mt-2">
      <span class="material-symbols-outlined" style="color: aqua;">how_to_reg</span>
      <span class="text-gray-400"> Your Spotify account is connected.</span>
    </p>
    } @else {
      <p class="mt-2 text-gray-400">
        Click this button. A new window will open. Login and approve access to nextCP/2 :
      </p>
      <button id="spotifyLoginBtn" mat-stroked-button class="settings maxButton" (click)="registerAppAtSpotify()">nextCP/2 Spotify access</button>
      <p class="max-w-2xl text-gray-400 mb-4">
          After granting access you wil be redirected to a localhost URL (error page). Copy spotify access code
          from your browsers URL bar into the input field below
      </p>
      <div class="relative z-0 w-full mb-5 group max-w-2xl">
          <input [(ngModel)]="spotifyCode" type="text" name="FORM_SPOTIFY_CODE" id="FORM_SPOTIFY_CODE"
            class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
            placeholder="" />
          <label for="FORM_SPOTIFY_CODE"
            class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">enter Spotify API Code</label>
      </div>
      <button id="spotifyLoginBtn" mat-stroked-button class="settings maxButton" (click)="sendSpotifyCode()">send it</button>
      <my-alert prefix="Hint" text="To copy the access code, click in your browsers URL bar and copy everything after 'http://localhost:65525/?code='"></my-alert>
    }

    <h2 class="mt-8 tracking-tight text-gray-300">MusicBrainz</h2>
    <p class="mt-2 max-w-2xl text-gray-400">
      Star-rating will update musicbrainz.org site if song has musicbrainzID metadata set. Password will be encoded after a successful save action.
    </p>

    <form class="max-w-md m-8 mt-8">
      <div class="relative z-0 w-full mb-5 group">
        <input [(ngModel)]="configService.musicBrainzConfig.username" type="text" name="FORM_MB_user" id="FORM_MB_user"
          class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
          placeholder=" " />
        <label for="FORM_MB_user"
          class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">Username</label>
      </div>
      <div class="relative z-0 w-full mb-5 group">
        <input [(ngModel)]="configService.musicBrainzConfig.password" type="text" name="FORM_MB_pass" id="FORM_MB_pass"
          class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
          placeholder=" " />
        <label for="FORM_MB_pass"
          class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">Password</label>
      </div>
      <button mat-stroked-button color="primary" (click)="saveMusicBrainzConfig()">save</button>
    </form>

    <h2 class="mt-4 font-medium tracking-tight text-gray-300">Last FM</h2>
    <p class="mt-2 text-gray-400">1. Click this button to open a new window. Log in and approve access for nextCP/2 :</p>
    <button mat-stroked-button class="settings maxButton" (click)="activateLastFM()">nextCP/2 LastFM access</button>
    <p class="mt-2 max-w-2xl text-gray-400">2. After completing Step 1, click this button to connect nextCP/2 to LastFM :</p>
    <button mat-stroked-button class="settings maxButton" (click)="generateSession()">generate LastFM session</button>

    <h1 class="mt-8 text-xl font-medium tracking-tight text-white">System Information</h1>
    <form class="max-w-xs m-8 mt-8">
      <div class="relative z-0 w-full mb-5 group">
        <input [ngModel]="buildName" type="text" name="FORM_SYS_buildname" id="FORM_SYS_buildname"
          class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
          placeholder=" " disabled readonly />
        <label for="FORM_SYS_buildname"
          class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">build
          name</label>
      </div>
      <div class="relative z-0 w-full mb-5 group">
        <input [ngModel]="buildNumber" type="text" name="FORM_SYS_buildnum" id="FORM_SYS_buildnum"
          class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
          placeholder=" " disabled readonly />
        <label for="FORM_SYS_buildnum"
          class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">build
          version</label>
      </div>
      <div class="relative z-0 w-full mb-5 group">
        <input [ngModel]="buildTime" type="text" name="FORM_SYS_buildtime" id="FORM_SYS_buildtime"
          class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-blue-500 focus:outline-none focus:ring-0 peer"
          placeholder=" " disabled readonly />
        <label for="FORM_SYS_buildtime"
          class="peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6">build
          time</label>
      </div>
    </form>
  </div>