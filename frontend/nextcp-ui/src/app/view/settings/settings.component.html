<div class="d-flex flex-column section">
    <div class="section head">Client profiles</div>

    <div class="d-flex flex-row section line">
        <div class="section item-label">Profile name</div>
        <div class="section item-disp"><input class="section" [(ngModel)]="configService.clientConfig.clientName"></div>
    </div>

    <div class="d-flex flex-row section line">
        <div class="section item-label">Profile ID</div>
        <div class="d-flex section item-disp">
            <input class="section" [(ngModel)]="configService.clientConfig.uuid">

            <!-- Dropdown for available configs-->
            <div class="d-inline-block" ngbDropdown #serverDrop>
                <button class="btn btn-outline-primary mr-2" id="dropdownManual" ngbDropdownToggle></button>
                <div ngbDropdownMenu aria-labelledby="dropdownManual">
                    <button ngbDropdownItem *ngFor="let clientConfig of configService?.serverConfig?.clientConfig"
                        (click)="selectConfig(clientConfig)">{{clientConfig.clientName}}
                        [{{clientConfig.uuid}}]</button>
                </div>
            </div>
        </div>
    </div>

    <div class="d-flex flex-row section line">
        <div class="section item-label">Default Media Renderer</div>
        <div class="section item-disp d-flex">
            <div class="d-flex">
                <input class="section" [(ngModel)]="configService.clientConfig.defaultMediaRenderer.friendlyName">
            </div>
            <mediaRendererDropdown (selectedRenderer)="mediaRendererChanged($event)" [displayButtonText]="false">
            </mediaRendererDropdown>
        </div>
    </div>

    <div class="d-flex flex-row section line">
        <div class="section item-label">Default Media Server</div>
        <div class="section item-disp d-flex pb-2">
            <div class="d-flex">
                <input class="section input" [(ngModel)]="configService.clientConfig.defaultMediaServer.friendlyName">
            </div>
            <mediaServerDropdown (selectedServer)="mediaServerChanged($event)" [displayButtonText]="false">
            </mediaServerDropdown>
        </div>
    </div>

    <div class="d-flex flex-row section line">
        <div class="section item-label"></div>
        <button (click)="save()" type="button" class="btn btn-primary item-disp">save</button>
    </div>
</div>

<div class="section head">Media Renderer configuration</div>

<div>
    <div class="d-flex flex-row flex-wrap ml-4">
        <div class="cardContainer" *ngFor="let rendererConfig of configService.getRendererDevicesConfig()">
            <mat-card class="card-width mr-4 mb-3">
                <mat-card-header>
                    <mat-card-title>{{rendererConfig.mediaRenderer.friendlyName}}</mat-card-title>
                    <mat-card-subtitle>{{rendererConfig.displayString}} [{{rendererConfig.ip}}]</mat-card-subtitle>
                </mat-card-header>
                <mat-card-content>
                    <div>
                        <mat-slide-toggle class="mb-2" [(ngModel)]="rendererConfig.active">
                            Enable
                        </mat-slide-toggle>
                    </div>
                    <div>
                        <mat-form-field appearance="fill">
                            <mat-label>device driver type</mat-label>
                            <mat-select [(ngModel)]="rendererConfig.deviceDriverType">
                                <mat-option>None</mat-option>
                                <mat-option [value]="dd.deviceType" *ngFor="let dd of configService.deviceDriverList">{{dd.deviceType}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div>
                        <div class="d-flex">
                            <mat-form-field appearance="fill">
                                <mat-label>device driver connection</mat-label>
                                <input matInput type="text" [(ngModel)]="rendererConfig.connectionString"
                                    placeholder="connection string">
                                <!-- icon not inlined yet ...  this looks ugly ... 

                                <button mat-button *ngIf="rendererConfig.connectionString" matSuffix mat-icon-button
                                    aria-label="Clear" (click)="rendererConfig.connectionString=''">
                                    <mat-icon>close</mat-icon>
                                </button>
                                -->
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="middle-spacer">&nbsp;</div>
                    <div class="d-flex">
                        <button mat-flat-button class="ml-2" color="primary" (click)="saveRendererConfig(rendererConfig)">Save</button>
                        <button mat-flat-button class="ml-2" color="warn" (click)="deleteRendererConfig(rendererConfig)">Delete</button>    
                    </div>
                </mat-card-content>
            </mat-card>
        </div>
    </div>
    <!-- -->
    <div class="section head">Adminisration</div>
    <div class="section subhead">Rating Support</div>
    <div class="d-flex section subhead">
        <button mat-flat-button class="ml-2 settings" (click)="ratingServiceService.syncRatingFromAudioFile()">import star rating from audio file</button>
        <button mat-flat-button class="ml-2 settings" (click)="ratingServiceService.syncRatingFromMusicBrainz()">import star rating from musicbrainz.org</button>
        <button mat-flat-button class="ml-2 settings" (click)="ratingServiceService.syncRatingsFromMusicBrainzToFiles()">import star rating from musicbrainz.org and store in audio file</button>
    </div>
</div>
